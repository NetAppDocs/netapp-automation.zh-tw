---
sidebar: sidebar 
permalink: solutions/cvo-azure-burst-to-cloud.html 
keywords: bluexp automation catalog, netapp automation solutions, azure, cloud volumes ontap, burst to cloud 
summary: æ‚¨å¯ä»¥ä½¿ç”¨æ­¤è‡ªå‹•åŒ–è§£æ±ºæ–¹æ¡ˆã€ä½¿ç”¨ Terraform éƒ¨ç½² Cloud Volumes ONTAP for Azure ã€‚ 
---
= Cloud Volumes ONTAP for Azure ï¼šé€£æ‹åˆ°é›²ç«¯
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
æœ¬æ–‡æ”¯æ´ NetApp Cloud Volumes ONTAP for Azure Automation è§£æ±ºæ–¹æ¡ˆã€ NetApp å®¢æˆ¶å¯å¾ BlueXPÂ  Automation ç›®éŒ„å–å¾—æ­¤è§£æ±ºæ–¹æ¡ˆã€‚

Cloud Volumes ONTAP for Azure Automation è§£æ±ºæ–¹æ¡ˆä½¿ç”¨ Terraform å°‡ Cloud Volumes ONTAP for Azure çš„å®¹å™¨åŒ–éƒ¨ç½²è‡ªå‹•åŒ–ã€è®“æ‚¨èƒ½å¤ å¿«é€Ÿéƒ¨ç½² Cloud Volumes ONTAP for Azure ã€ç„¡éœ€ä»»ä½•æ‰‹å‹•ä»‹å…¥ã€‚

.é–‹å§‹ä¹‹å‰
* æ‚¨å¿…é ˆé€é BlueXPÂ  Web UI ä¸‹è¼‰link:https://console.bluexp.netapp.com/automationCatalog["Cloud Volumes ONTAP Azure ï¼šé€£æ‹åˆ°é›²ç«¯"^]è‡ªå‹•åŒ–è§£æ±ºæ–¹æ¡ˆã€‚è§£æ±ºæ–¹æ¡ˆåŒ…è£ç‚º `CVO-Azure-Burst-To-Cloud.zip`ã€‚
* æ‚¨å¿…é ˆåœ¨èˆ‡ Cloud Volumes ONTAP ç›¸åŒçš„ç¶²è·¯ä¸Šå®‰è£ Linux VM ã€‚
* å®‰è£ Linux VM ä¹‹å¾Œã€æ‚¨å¿…é ˆéµå¾ªæœ¬è§£æ±ºæ–¹æ¡ˆä¸­çš„æ­¥é©Ÿä¾†å®‰è£å¿…è¦çš„ç›¸ä¾æ€§ã€‚




== æ­¥é©Ÿ 1 ï¼šå®‰è£ Docker å’Œ Docker Compose



=== å®‰è£Docker

ä»¥ä¸‹æ­¥é©Ÿä»¥ Ubuntu 20.04 Debian Linux ç™¼ä½ˆè»Ÿé«”ç‚ºä¾‹ã€‚æ‚¨åŸ·è¡Œçš„å‘½ä»¤å–æ±ºæ–¼æ‚¨æ‰€ä½¿ç”¨çš„ Linux ç™¼ä½ˆè»Ÿé«”ã€‚è«‹åƒé–±ç‰¹å®šçš„ Linux ç™¼ä½ˆè»Ÿé«”æ–‡ä»¶ä»¥ç­è§£æ‚¨çš„çµ„æ…‹ã€‚

.æ­¥é©Ÿ
. åŸ·è¡Œä¸‹åˆ—å‘½ä»¤ä¾†å®‰è£ Docker `sudo` ï¼š
+
[source, cli]
----
sudo apt-get update
sudo apt-get install apt-transport-https cacertificates curl gnupg-agent software-properties-common curl -fsSL https://download.docker.com/linux/ubuntu/gpg |
sudo apt-key add -
sudo add-apt-repository â€œdeb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stableâ€
sudo apt-get update
sudo apt-get install dockerce docker-ce-cli containerd.io
----
. é©—è­‰å®‰è£ï¼š
+
[source, cli]
----
docker â€“version
----
. ç¢ºèªæ‚¨çš„ Linux ç³»çµ±ä¸Šå·²å»ºç«‹åç‚ºã€Œæ³Šå¡¢è¦–çª—ã€çš„ç¾¤çµ„ã€‚å¦‚æœ‰å¿…è¦ã€è«‹å»ºç«‹ç¾¤çµ„ï¼š
+
[source, cli]
----
sudo groupadd docker
----
. å°‡éœ€è¦å­˜å– Docker çš„ä½¿ç”¨è€…æ–°å¢è‡³ç¾¤çµ„ï¼š
+
[source, cli]
----
sudo usermod -aG docker $(whoami)
----
. æ‚¨çš„è®Šæ›´æœƒåœ¨ç™»å‡ºä¸¦é‡æ–°ç™»å…¥çµ‚ç«¯æ©Ÿå¾Œå¥—ç”¨ã€‚æˆ–è€…ã€æ‚¨ä¹Ÿå¯ä»¥ç«‹å³å¥—ç”¨è®Šæ›´ï¼š
+
[source, cli]
----
newgrp docker
----




=== å®‰è£ Docker Compose

.æ­¥é©Ÿ
. åŸ·è¡Œä¸‹åˆ—å‘½ä»¤ä¾†å®‰è£ Docker Compose `sudo` ï¼š
+
[source, cli]
----
sudo curl -L â€œhttps://github.com/docker/compose/releases/download/1.29.2/dockercompose-(ğ‘¢ğ‘›ğ‘ğ‘šğ‘’ âˆ’ ğ‘ )âˆ’(uname -m)â€ -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
----
. é©—è­‰å®‰è£ï¼š
+
[source, cli]
----
docker-compose â€“version
----




== æ­¥é©Ÿ 2 ï¼šæº–å‚™ Docker æ˜ åƒæª”

.æ­¥é©Ÿ
. å°‡è³‡æ–™å¤¾è¤‡è£½ `CVO-Azure-Burst-To-Cloud.zip`åˆ°æ‚¨è¦ç”¨ä¾†éƒ¨ç½² Cloud Volumes ONTAP çš„ Linux VM ï¼š
+
[source, cli]
----
scp -i ~/<private-key>.pem -r CVO-Azure-Burst-To-Cloud.zip <azureuser>@<IP_ADDRESS_OF_VM>:<LOCATION_TO_BE_COPIED>
----
+
** `private-key.pem`æ˜¯æ‚¨çš„ç§å¯†é‡‘é‘°æª”æ¡ˆã€ç„¡éœ€å¯†ç¢¼å³å¯ç™»å…¥ã€‚
** `azureuser`æ˜¯ VM ä½¿ç”¨è€…åç¨±ã€‚
** `IP_ADDRESS_OF_VM`æ˜¯ VM IP ä½å€ã€‚
** `LOCATION_TO_BE_COPIED`ç‚ºè³‡æ–™å¤¾çš„è¤‡è£½ä½ç½®ã€‚


. è§£å£“ç¸® `CVO-Azure-Burst-To-Cloud.zip`è³‡æ–™å¤¾ã€‚æ‚¨å¯ä»¥æ“·å–ç›®å‰ç›®éŒ„æˆ–è‡ªè¨‚ä½ç½®ä¸­çš„è³‡æ–™å¤¾ã€‚
+
è‹¥è¦æ“·å–ç›®å‰ç›®éŒ„ä¸­çš„è³‡æ–™å¤¾ã€è«‹åŸ·è¡Œï¼š

+
[source, cli]
----
unzip CVO-Azure-Burst-To-Cloud.zip
----
+
è‹¥è¦æ“·å–è‡ªè¨‚ä½ç½®ä¸­çš„è³‡æ–™å¤¾ã€è«‹åŸ·è¡Œï¼š

+
[source, cli]
----
unzip CVO-Azure-Burst-To-Cloud.zip -d ~/<your_folder_name>
----
. æ“·å–å…§å®¹ä¹‹å¾Œã€è«‹ç€è¦½è‡³ `CVO_Azure_Deployment`è³‡æ–™å¤¾ä¸¦åŸ·è¡Œä¸‹åˆ—å‘½ä»¤ä»¥æª¢è¦–æª”æ¡ˆï¼š
+
[source, cli]
----
 ls -la
----
+
æ‚¨æ‡‰è©²æœƒçœ‹åˆ°é¡ä¼¼ä¸‹åˆ—ç¯„ä¾‹çš„æª”æ¡ˆæ¸…å–®ï¼š

+
[listing]
----
drwxr-xr-x@ 11 user1 staff 352 May 5 13:56 .
drwxr-xr-x@ 5 user1 staff 160 May 5 14:24 ..
-rw-r--r--@ 1 user1 staff 324 May 5 13:18 .env
-rw-r--r--@ 1 user1 staff 1449 May 5 13:18 Dockerfile
-rw-r--r--@ 1 user1 staff 35149 May 5 13:18 LICENSE
-rw-r--r--@ 1 user1 staff 13356 May 5 14:26 README.md
-rw-r--r-- 1  user1 staff 354318151 May 5 13:51 cvo_azure_flexcache_ubuntu_image_latest
drwxr-xr-x@ 4 user1 staff 128 May 5 13:18 cvo_azure_variables
-rw-r--r--@ 1 user1 staff 996 May 5 13:18 docker-compose-deploy.yml
-rw-r--r--@ 1 user1 staff 1041 May 5 13:18 docker-compose-destroy.yml
-rw-r--r--@ 1 user1 staff 4771 May 5 13:18 sp_role.json
----
. æ‰¾åˆ° `cvo_azure_flexcache_ubuntu_image_latest.tar.gz`æª”æ¡ˆã€‚å…¶ä¸­åŒ…å«éƒ¨ç½² Cloud Volumes ONTAP for Azure æ‰€éœ€çš„ Docker æ˜ åƒã€‚
. è§£å£“ç¸®æª”æ¡ˆï¼š
+
[source, cli]
----
docker load -i cvo_azure_flexcache_ubuntu_image_latest.tar.gz
----
. ç­‰å¾…å¹¾åˆ†é˜ã€è®“ Docker æ˜ åƒæª”è¼‰å…¥ã€ç„¶å¾Œé©—è­‰ Docker æ˜ åƒæª”æ˜¯å¦æˆåŠŸè¼‰å…¥ï¼š
+
[source, cli]
----
docker images
----
+
æ‚¨æ‡‰è©²æœƒçœ‹åˆ°ä¸€å€‹ä»¥ `latest`æ¨™è¨˜å‘½åçš„ Docker æ˜ åƒ `cvo_azure_flexcache_ubuntu_image_latest`ã€å¦‚ä¸‹åˆ—ç¯„ä¾‹æ‰€ç¤ºï¼š

+
[listing]
----
REPOSITORY TAG IMAGE ID CREATED SIZE
cvo_azure_flexcache_ubuntu_image latest 18db15a4d59c 2 weeks ago 1.14GB
----




== æ­¥é©Ÿ 3 ï¼šå»ºç«‹ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ

åœ¨æ­¤éšæ®µã€æ‚¨å¿…é ˆå»ºç«‹å…©å€‹ç’°å¢ƒè®Šæ•¸æª”æ¡ˆã€‚å…¶ä¸­ä¸€å€‹æª”æ¡ˆæ˜¯ä½¿ç”¨æœå‹™ä¸»é«”èªè­‰ä¾†é©—è­‰ Azure Resource Manager API ã€‚ç¬¬äºŒå€‹æª”æ¡ˆç”¨æ–¼è¨­å®šç’°å¢ƒè®Šæ•¸ã€è®“ BlueXPÂ  Terraform æ¨¡çµ„èƒ½å¤ æ‰¾å‡ºä¸¦é©—è­‰ Azure API ã€‚

.æ­¥é©Ÿ
. å»ºç«‹æœå‹™ä¸»é«”ã€‚
+
åœ¨å»ºç«‹ç’°å¢ƒè®Šæ•¸æª”æ¡ˆä¹‹å‰ï¼Œæ‚¨å¿…é ˆéµå¾ªä¸­çš„æ­¥é©Ÿä¾†å»ºç«‹æœå‹™ä¸»é«”link:https://learn.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal["å»ºç«‹å¯å­˜å–è³‡æºçš„ Azure Active Directory æ‡‰ç”¨ç¨‹å¼å’Œæœå‹™ä¸»é«”"^]ã€‚

. å°‡ * è²¢ç»è€… * è§’è‰²æŒ‡æ´¾çµ¦æ–°å»ºç«‹çš„æœå‹™ä¸»é«”ã€‚
. å»ºç«‹è‡ªè¨‚è§’è‰²ã€‚
+
.. æ‰¾åˆ° `sp_role.json`æª”æ¡ˆã€ä¸¦åœ¨åˆ—å‡ºçš„å‹•ä½œä¸‹æª¢æŸ¥æ‰€éœ€çš„æ¬Šé™ã€‚
.. æ’å…¥é€™äº›æ¬Šé™ã€ä¸¦å°‡è‡ªè¨‚è§’è‰²é™„åŠ è‡³æ–°å»ºç«‹çš„æœå‹™ä¸»é«”ã€‚


. ç€è¦½è‡³ * æ†‘è­‰èˆ‡æ©Ÿå¯† * ã€ç„¶å¾Œé¸å– * æ–°ç”¨æˆ¶ç«¯æ©Ÿå¯† * ä»¥å»ºç«‹ç”¨æˆ¶ç«¯æ©Ÿå¯†ã€‚
+
ç•¶æ‚¨å»ºç«‹ç”¨æˆ¶ç«¯æ©Ÿå¯†æ™‚ã€å¿…é ˆå¾ * å€¼ * æ¬„è¨˜éŒ„è©³ç´°è³‡æ–™ã€å› ç‚ºæ‚¨å°‡ç„¡æ³•å†æ¬¡çœ‹åˆ°æ­¤å€¼ã€‚æ‚¨ä¹Ÿå¿…é ˆè¨˜éŒ„ä¸‹åˆ—è³‡è¨Šï¼š

+
** ç”¨æˆ¶ç«¯ ID
** è¨‚é–± ID
** ç§Ÿæˆ¶ ID
+
æ‚¨éœ€è¦é€™äº›è³‡è¨Šä¾†å»ºç«‹ç’°å¢ƒè®Šæ•¸ã€‚æ‚¨å¯ä»¥åœ¨ã€Œæœå‹™ä¸»è¦ä½¿ç”¨è€…ä»‹é¢ã€çš„ * ç¸½è¦½ * å€æ®µä¸­æ‰¾åˆ°ç”¨æˆ¶ç«¯ ID å’Œç§Ÿæˆ¶ ID è³‡è¨Šã€‚



. å»ºç«‹ç’°å¢ƒæª”æ¡ˆã€‚
+
.. åœ¨ä¸‹åˆ—ä½ç½®å»ºç«‹ `azureauth.env`æª”æ¡ˆï¼š
+
`path/to/env-file/azureauth.env`

+
... å°‡ä¸‹åˆ—å…§å®¹æ–°å¢è‡³æª”æ¡ˆï¼š
+
ClientID=<> clientSecret = <> è¨‚é–± Id=<> TenantId=<>

+
æ ¼å¼ *must * èˆ‡ä¸Šè¿°æ‰€ç¤ºå®Œå…¨ç›¸åŒã€ä¸”åœ¨é‡‘é‘°èˆ‡å€¼ä¹‹é–“æ²’æœ‰ä»»ä½•ç©ºæ ¼ã€‚



.. åœ¨ä¸‹åˆ—ä½ç½®å»ºç«‹ `credentials.env`æª”æ¡ˆï¼š
+
`path/to/env-file/credentials.env`

+
... å°‡ä¸‹åˆ—å…§å®¹æ–°å¢è‡³æª”æ¡ˆï¼š
+
Azure ç§Ÿæˆ¶ ID=<> Azure ç”¨æˆ¶ç«¯æ©Ÿå¯† =<> Azure ç”¨æˆ¶ç«¯ ID =<> Azure è¨‚é–± ID=<>

+
æ ¼å¼ *must * èˆ‡ä¸Šè¿°æ‰€ç¤ºå®Œå…¨ç›¸åŒã€ä¸”åœ¨é‡‘é‘°èˆ‡å€¼ä¹‹é–“æ²’æœ‰ä»»ä½•ç©ºæ ¼ã€‚





. å°‡çµ•å°æª”æ¡ˆè·¯å¾‘æ–°å¢è‡³ `.env`æª”æ¡ˆã€‚
+
åœ¨å°æ‡‰ç’°å¢ƒè®Šæ•¸çš„æª”æ¡ˆ `AZURE_RM_CREDS`ä¸­è¼¸å…¥ç’°å¢ƒæª”æ¡ˆçš„ `.env`çµ•å°è·¯å¾‘ `azureauth.env`ã€‚

+
`AZURE_RM_CREDS=path/to/env-file/azureauth.env`

+
åœ¨å°æ‡‰ç’°å¢ƒè®Šæ•¸çš„æª”æ¡ˆ `BLUEXP_TF_AZURE_CREDS`ä¸­è¼¸å…¥ç’°å¢ƒæª”æ¡ˆçš„ `.env`çµ•å°è·¯å¾‘ `credentials.env`ã€‚

+
`BLUEXP_TF_AZURE_CREDS=path/to/env-file/credentials.env`





== æ­¥é©Ÿ 4 ï¼šå°‡ Cloud Volumes ONTAP æˆæ¬Šæ–°å¢è‡³ BlueXPÂ  æˆ–è¨‚é–± BlueXPÂ 

æ‚¨å¯ä»¥å°‡ Cloud Volumes ONTAP æˆæ¬Šæ–°å¢è‡³ BlueXPÂ  ã€æˆ–åœ¨ Azure Marketplace ä¸­è¨‚é–± NetApp BlueXPÂ  ã€‚

.æ­¥é©Ÿ
. å¾ Azure å…¥å£ç¶²ç«™ç€è¦½è‡³ * SaaS * ã€ç„¶å¾Œé¸å– * è¨‚é–± NetApp BlueXPÂ  * ã€‚
. é¸æ“‡ * Cloud Manager ï¼ˆæŒ‰å°æ™‚ä¸Šé™ PYGO ã€ WORM å’Œè³‡æ–™æœå‹™ï¼‰ * è¨ˆç•«ã€‚
+
æ‚¨å¯ä»¥ä½¿ç”¨èˆ‡ Cloud Volumes ONTAP ç›¸åŒçš„è³‡æºç¾¤çµ„æˆ–ä¸åŒçš„è³‡æºç¾¤çµ„ã€‚

. è¨­å®š BlueXPÂ  å…¥å£ç¶²ç«™ã€å°‡ SaaS è¨‚é–±åŒ¯å…¥ BlueXPÂ  ã€‚
+
æ‚¨å¯ä»¥ç›´æ¥å¾ Azure å…¥å£ç¶²ç«™è¨­å®šæ­¤åŠŸèƒ½ã€æ–¹æ³•æ˜¯ç€è¦½ * ç”¢å“èˆ‡æ–¹æ¡ˆè©³ç´°è³‡æ–™ * ã€ç„¶å¾Œé¸å– * ç«‹å³è¨­å®šå¸³æˆ¶ * é¸é …ã€‚

+
ç„¶å¾Œæ‚¨å°‡è¢«é‡æ–°å°å‘è‡³ BlueXPÂ  å…¥å£ç¶²ç«™ä»¥ç¢ºèªçµ„æ…‹ã€‚

. é¸å– * å„²å­˜ * ã€ç¢ºèª BlueXPÂ  å…¥å£ç¶²ç«™ä¸­çš„çµ„æ…‹ã€‚




== æ­¥é©Ÿ 5 ï¼šå»ºç«‹å¤–éƒ¨ç£ç¢Ÿå€

æ‚¨æ‡‰è©²å»ºç«‹å¤–éƒ¨ç£ç¢Ÿå€ã€ä»¥ä¿ç•™ Terraform ç‹€æ…‹æª”æ¡ˆåŠå…¶ä»–é‡è¦æª”æ¡ˆã€‚æ‚¨å¿…é ˆç¢ºå®š Terraform å¯ä»¥ä½¿ç”¨é€™äº›æª”æ¡ˆä¾†åŸ·è¡Œå·¥ä½œæµç¨‹å’Œéƒ¨ç½²ã€‚

.æ­¥é©Ÿ
. åœ¨ Docker Compose ä¹‹å¤–å»ºç«‹å¤–éƒ¨ Volume ï¼š
+
[source, cli]
----
docker volume create Â« volume_name Â»
----
+
ç¯„ä¾‹ï¼š

+
[listing]
----
docker volume create cvo_azure_volume_dst
----
. è«‹ä½¿ç”¨ä¸‹åˆ—å…¶ä¸­ä¸€å€‹é¸é …ï¼š
+
.. æ–°å¢å¤–éƒ¨ç£ç¢Ÿå€è·¯å¾‘è‡³ `.env`ç’°å¢ƒæª”æ¡ˆã€‚
+
æ‚¨å¿…é ˆéµå¾ªå¦‚ä¸‹æ‰€ç¤ºçš„ç¢ºåˆ‡æ ¼å¼ã€‚

+
æ ¼å¼ï¼š

+
`PERSISTENT_VOL=path/to/external/volume:/cvo_azure`

+
ç¯„ä¾‹ï¼š
`PERSISTENT_VOL=cvo_azure_volume_dst:/cvo_azure`

.. å°‡ NFS å…±ç”¨æ–°å¢ç‚ºå¤–éƒ¨ç£ç¢Ÿå€ã€‚
+
è«‹ç¢ºå®š Docker å®¹å™¨å¯ä»¥èˆ‡ NFS å…±ç”¨é€šè¨Šã€è€Œä¸”å·²è¨­å®šæ­£ç¢ºçš„æ¬Šé™ã€ä¾‹å¦‚è®€å– / å¯«å…¥ã€‚

+
... å°‡ NFS å…±ç”¨è·¯å¾‘æ–°å¢ç‚º Docker Compose æª”æ¡ˆä¸­å¤–éƒ¨ Volume çš„è·¯å¾‘ã€å¦‚ä¸‹æ‰€ç¤ºï¼šæ ¼å¼ï¼š
+
`PERSISTENT_VOL=path/to/nfs/volume:/cvo_azure`

+
ç¯„ä¾‹ï¼š
`PERSISTENT_VOL=nfs/mnt/document:/cvo_azure`





. ç€è¦½è‡³ `cvo_azure_variables`è³‡æ–™å¤¾ã€‚
+
æ‚¨æ‡‰è©²æœƒåœ¨è³‡æ–™å¤¾ä¸­çœ‹åˆ°ä¸‹åˆ—è®Šæ•¸æª”æ¡ˆï¼š

+
`terraform.tfvars`

+
`variables.tf`

. æ ¹æ“šæ‚¨çš„éœ€æ±‚è®Šæ›´æª”æ¡ˆå…§çš„å€¼ `terraform.tfvars`ã€‚
+
ä¿®æ”¹æª”æ¡ˆä¸­çš„ä»»ä½•è®Šæ•¸å€¼æ™‚ã€æ‚¨å¿…é ˆé–±è®€ç‰¹å®šçš„æ”¯æ´æ–‡ä»¶ `terraform.tfvars`ã€‚é€™äº›å€¼æœƒå› åœ°å€ã€å¯ç”¨åº¦å€åŸŸå’Œ Cloud Volumes ONTAP for Azure æ”¯æ´çš„å…¶ä»–å› ç´ è€Œç•°ã€‚é€™åŒ…æ‹¬å–®ä¸€ç¯€é»å’Œé«˜å¯ç”¨åº¦ï¼ˆ HA ï¼‰é…å°çš„æˆæ¬Šã€ç£ç¢Ÿå¤§å°å’Œ VM å¤§å°ã€‚

+
Connector å’Œ Cloud Volumes ONTAP Terraform æ¨¡çµ„çš„æ‰€æœ‰æ”¯æ´è®Šæ•¸éƒ½å·²å®šç¾©åœ¨æª”æ¡ˆä¸­ `variables.tf`ã€‚åœ¨æ–°å¢è‡³æª”æ¡ˆä¹‹å‰ã€æ‚¨å¿…é ˆå…ˆåƒè€ƒæª”æ¡ˆ `terraform.tfvars`ä¸­çš„è®Šæ•¸åç¨± `variables.tf`ã€‚

. æ ¹æ“šæ‚¨çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥å°‡ä¸‹åˆ—é¸é …è¨­å®šç‚ºæˆ–ï¼Œä»¥å•Ÿç”¨æˆ– `false`åœç”¨ FlexCache å’Œ FlexClone `true` ã€‚
+
ä¸‹åˆ—ç¯„ä¾‹å¯å•Ÿç”¨ FlexCache å’Œ FlexClone ï¼š

+
** `is_flexcache_required = true`
** `is_flexclone_required = true`


. å¦‚æœ‰å¿…è¦ã€æ‚¨å¯ä»¥å¾ Azure Active Directory æœå‹™æ“·å– Terraform è®Šæ•¸çš„å€¼ `az_service_principal_object_id`ï¼š
+
.. ç€è¦½è‡³ * ä¼æ¥­æ‡‰ç”¨ç¨‹å¼ -> æ‰€æœ‰æ‡‰ç”¨ç¨‹å¼ * ã€ç„¶å¾Œé¸å–æ‚¨å…ˆå‰å»ºç«‹çš„æœå‹™ä¸»é«”åç¨±ã€‚
.. è¤‡è£½ç‰©ä»¶ ID ä¸¦æ’å…¥ Terraform è®Šæ•¸çš„å€¼ï¼š
+
`az_service_principal_object_id`







== æ­¥é©Ÿ 6 ï¼šéƒ¨ç½²é©ç”¨æ–¼ Azure çš„ Cloud Volumes ONTAP

è«‹ä¾ç…§ä¸‹åˆ—æ­¥é©Ÿéƒ¨ç½²é©ç”¨æ–¼ Azure çš„ Cloud Volumes ONTAP ã€‚

.æ­¥é©Ÿ
. å¾æ ¹è³‡æ–™å¤¾åŸ·è¡Œä¸‹åˆ—å‘½ä»¤ä»¥è§¸ç™¼éƒ¨ç½²ï¼š
+
[source, cli]
----
docker-compose up -d
----
+
è§¸ç™¼å…©å€‹å®¹å™¨ã€ç¬¬ä¸€å€‹å®¹å™¨æœƒéƒ¨ç½² Cloud Volumes ONTAP ã€ç¬¬äºŒå€‹å®¹å™¨å‰‡æœƒå°‡é™æ¸¬è³‡æ–™å‚³é€è‡³ AutoSupport ã€‚

+
ç¬¬äºŒå€‹å®¹å™¨æœƒç­‰å¾…ã€ç›´åˆ°ç¬¬ä¸€å€‹å®¹å™¨æˆåŠŸå®Œæˆæ‰€æœ‰æ­¥é©Ÿç‚ºæ­¢ã€‚

. ä½¿ç”¨è¨˜éŒ„æª”ç›£æ§éƒ¨ç½²ç¨‹åºçš„é€²åº¦ï¼š
+
[source, cli]
----
docker-compose logs -f
----
+
æ­¤å‘½ä»¤æœƒå³æ™‚æä¾›è¼¸å‡ºã€ä¸¦æ“·å–ä¸‹åˆ—è¨˜éŒ„æª”ä¸­çš„è³‡æ–™ï¼š

+
`deployment.log`

+
`telemetry_asup.log`

+
æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ—ç’°å¢ƒè®Šæ•¸ç·¨è¼¯æª”æ¡ˆã€ä»¥è®Šæ›´é€™äº›è¨˜éŒ„æª”çš„åç¨± `.env`ï¼š

+
`DEPLOYMENT_LOGS`

+
`TELEMETRY_ASUP_LOGS`

+
ä¸‹åˆ—ç¯„ä¾‹èªªæ˜å¦‚ä½•è®Šæ›´è¨˜éŒ„æª”åç¨±ï¼š

+
`DEPLOYMENT_LOGS=<your_deployment_log_filename>.log`

+
`TELEMETRY_ASUP_LOGS=<your_telemetry_asup_log_filename>.log`



.å®Œæˆå¾Œ
æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹åˆ—æ­¥é©Ÿç§»é™¤æš«å­˜ç’°å¢ƒã€ä¸¦æ¸…é™¤éƒ¨ç½²ç¨‹åºæœŸé–“å»ºç«‹çš„é …ç›®ã€‚

.æ­¥é©Ÿ
. å¦‚æœæ‚¨éƒ¨ç½²äº† FlexCache ã€è«‹åœ¨æª”æ¡ˆä¸­è¨­å®šä¸‹åˆ—é¸é … `terraform.tfvars`ã€é€™æ¨£æœƒæ¸…é™¤ FlexCache ç£ç¢Ÿå€ã€ä¸¦ç§»é™¤å…ˆå‰å»ºç«‹çš„æš«å­˜ç’°å¢ƒã€‚
+
`flexcache_operation = "destroy"`

+

NOTE: å¯èƒ½çš„é¸é …æœ‰ `deploy`å’Œ `destroy`ã€‚

. å¦‚æœæ‚¨éƒ¨ç½²äº† FlexClone ã€è«‹åœ¨æª”æ¡ˆä¸­è¨­å®šä¸‹åˆ—é¸é … `terraform.tfvars`ã€é€™æ¨£æœƒæ¸…é™¤ FlexClone ç£ç¢Ÿå€ã€ä¸¦ç§»é™¤å…ˆå‰å»ºç«‹çš„æš«å­˜ç’°å¢ƒã€‚
+
`flexclone_operation = "destroy"`

+

NOTE: å¯èƒ½çš„é¸é …æœ‰ `deploy`å’Œ `destroy`ã€‚


